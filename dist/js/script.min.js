const catalog=document.querySelector(".catalog__content"),linkCategory=document.querySelectorAll(".catalog__navigation-category");function deleteActiveLink(){let t=document.querySelector(".navigation-category_active");t&&t.classList.remove("navigation-category_active")}function activeScroll(){const t=document.querySelectorAll(".catalog__products-category"),e={};t.forEach((t,o)=>{e[o]=t.offsetTop}),catalog.addEventListener("scroll",(function(){for(let t in e)if(catalog.scrollTop<=e[t]+100)return deleteActiveLink(),void linkCategory[t].classList.add("navigation-category_active")}))}function clickLink(){linkCategory.forEach(t=>{t.addEventListener("click",()=>{const e=document.querySelectorAll(".catalog__product-catalog"),o=t.getAttribute("data-category");e.forEach(e=>{if("block"===e.style.display){const n=e.querySelector(`.catalog__products-category[data-category="${o}"]`).offsetTop;catalog.scrollTop=n,deleteActiveLink(),t.classList.add("navigation-catagory_active")}})})}),activeScroll()}function showInfo(){const t=document.querySelector(".header__info"),e=document.querySelector(".header__info-content");t.addEventListener("mouseover",()=>{e.style.display="flex"}),t.addEventListener("mouseout",()=>{setTimeout((function(){e.style.display=""}),3e3)})}function changeWeight(t){const e=t.parentNode.querySelector(".products-weight__number");let o,n=function t(e){return(e=e.parentNode).getAttribute("data-container")?e:t(e)}(t);"bag"===n.getAttribute("data-container")?o=25:"bucket"===n.getAttribute("data-container")&&(o=1),"products-weight__up"===t.classList.value?e.textContent=Number(e.textContent)+o:"products-weight__down"===t.classList.value&&function(){let t=Number(e.textContent)-o;t>=1&&(e.textContent=t)}()}function clickChangeWeight(){const t=document.querySelector(".catalog");let e;t.addEventListener("click",o=>{e=t.querySelectorAll(".products-weight button"),e.forEach(t=>{o.target.closest("button")===t&&changeWeight(o.target.closest("button"))})})}function showScrollBar(){const t=document.querySelector(".catalog__aside");if(t.scrollHeight>=t.offsetHeight){const e=document.createElement("div");e.classList.add("scrollBar-line"),t.appendChild(e)}}function addProduct(){const t=document.querySelectorAll(".catalog__products-button"),e=document.querySelector(".catalog__aside-products");t.forEach(t=>{t.addEventListener("click",(function(){showScrollBar();const o=t.parentNode,n=o.parentNode.getAttribute("data-category"),a=o.querySelector(".products-weight__number").textContent,c=o.querySelector(".catalog__products-title").textContent,r=e.querySelector(`[data-category="${n}"]`);r.style.display="list-item";let l;if(e.querySelectorAll(".basket-product").forEach(t=>{if(c===t.querySelector("h6").textContent){let e=t.querySelector(".products-weight__number").textContent;e=Number(e)+Number(this.parentNode.querySelector(".products-weight__number").textContent),t.querySelector(".products-weight__number").textContent=e,l=0}}),0===l)return;let i=document.createElement("div");i.classList.add("basket-product");let s=document.querySelector(".products-weight").cloneNode(!0);s.querySelector(".products-weight__number").textContent=a;let d={};"bag"===o.getAttribute("data-container")?d={string:"Мешки 25 кг",attribute:"bag"}:"bucket"===o.getAttribute("data-container")&&(d={string:"Ведра по 1 и 5 кг",attribute:"bucket"}),i.setAttribute("data-container",d.attribute);const u=`<div class="basket-product__heading">\n                                    <h6>${c}</h6>\n                                    <div class="basket-product__right">\n                                        <div class="basket-product__container">${d.string}</div>\n                                        <div class="basket-product__btn">\n                                            <span class="basket-product__btn-item"></span><span class="basket-product__btn-item"></span><span class="basket-product__btn-item"></span>\n                                            <div class="basket-product__btn-content">\n                                                <div class="basket-product__background">\n                                                    <svg xmlns="http://www.w3.org/2000/svg" width="193" height="103" viewBox="0 0 193 102.603">\n                                                        <defs>\n                                                            <filter id="${c}" width="193" height="102.603" x="0" y="0" filterUnits="userSpaceOnUse">\n                                                                <feOffset dy="3"/>\n                                                                <feGaussianBlur result="blur" stdDeviation="3"/>\n                                                                <feFlood flood-opacity=".161"/>\n                                                                <feComposite in2="blur" operator="in"/>\n                                                                <feComposite in="SourceGraphic"/>\n                                                            </filter>\n                                                        </defs>\n                                                        <g filter="url(#${c})">\n                                                            <path fill="#fff" d="M-4077-2087.4a8 8 0 0 1-8-8v-57a8 8 0 0 1 8-8h148.44l18.56-11.6v76.6a8 8 0 0 1-8 8z" transform="translate(4094 2178)"/>\n                                                        </g>\n                                                    </svg>\n                                                </div>\n                                                <div class="basket-product__btn-content_info">\n                                                    <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 13 13">\n                                                        <path fill="#2ec0d1" d="M0 6.5A6.5 6.5 0 1 1 6.5 13 6.508 6.508 0 0 1 0 6.5zm1.625 0A4.875 4.875 0 1 0 6.5 1.625 4.881 4.881 0 0 0 1.625 6.5zM5.69 8.936v-3.25h1.625v3.25zm0-4.875a.813.813 0 1 1 .812.812.812.812 0 0 1-.814-.812z"/>\n                                                    </svg>\n                                                    Узнать о продукте\n                                                </div>\n                                                <span class="basket-product__btn-content_border"></span>\n                                                <div class="basket-product__btn-content_delete">\n                                                    <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 13 13">\n                                                        <path fill="#2ec0d1" d="M8.125 11.916H2.709a1.093 1.093 0 0 1-.779-.324 1.007 1.007 0 0 1-.3-.715l-.5-6h-.047A1.084 1.084 0 0 1 0 3.792V2.709a1.085 1.085 0 0 1 1.083-1.084h1.626v-.542A1.084 1.084 0 0 1 3.792 0h3.25a1.085 1.085 0 0 1 1.083 1.083v.542H9.75a1.085 1.085 0 0 1 1.083 1.084v1.083A1.084 1.084 0 0 1 9.75 4.875h-.043l-.5 5.958a1.084 1.084 0 0 1-1.082 1.083zM2.214 4.875l.495 5.958h5.416v-.045l.492-5.913zM1.083 2.709v1.083H9.75V2.709H1.083zm2.709-1.626v.542h3.25v-.542z" transform="translate(1.083 .542)"/>\n                                                    </svg>\n                                                    Удалить продукт\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="products-weight">\n                                    ${s.innerHTML}\n                                </div>`;i.innerHTML=u,r.appendChild(i),document.querySelector(".catalog__aside-arrange")||function(){const t=document.querySelector(".catalog__aside"),e=document.createElement("form");e.setAttribute("action","#"),e.innerHTML='<input class="catalog__aside-arrange" type="submit" value="Оформить">',t.appendChild(e)}(),function(){const t=document.querySelectorAll(".basket-product"),e=document.querySelectorAll(".basket-product__btn-content_delete"),o=document.querySelectorAll(".catalog__aside-category li");e.forEach((e,n)=>{e.addEventListener("click",()=>{t[n].style.opacity="0",setTimeout(()=>{t[n].remove(),o.forEach(t=>{t.querySelector(".basket-product")||(t.style.display="none")});document.querySelector(".basket-product")||document.querySelector(".catalog__aside-arrange").remove()},300)})})}()}))})}function switchCatalog(){document.querySelector(".catalog__content-radio").addEventListener("click",t=>{const e=t.target,o=document.querySelector('.catalog__product-catalog[data-catalog="main"]'),n=document.querySelector('.catalog__product-catalog[data-catalog="personal"]');"switch"===e.getAttribute("data-btn")&&("main-catalog"===e.id?(o.style.display="block",n.style.display="none"):"personal-catalog"===e.id&&(n.style.display="block",o.style.display="none"))})}switchCatalog(),clickLink(),showInfo(),addProduct(),clickChangeWeight();